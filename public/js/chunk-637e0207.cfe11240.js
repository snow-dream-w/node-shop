(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-637e0207"],{"0c30":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"order-content clearfix"},[n("div",{staticClass:"content"},[n("person-avatar"),n("div",{staticClass:"order"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,border:"",id:"table"}},[n("el-table-column",{attrs:{label:"商品",width:"580"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{attrs:{data:e.row.goodsInfo,border:""}},[n("el-table-column",{attrs:{width:"108"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.axios.defaults.baseURL+e.row.goodsId.images[0]}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"名称",prop:"goodsId.name",width:"180"}}),n("el-table-column",{attrs:{label:"单价",prop:"goodsId.price",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.goodsId.price.toFixed(2))+"元")]}}],null,!0)}),n("el-table-column",{attrs:{label:"数量",prop:"num",width:"90"}}),n("el-table-column",{attrs:{label:"单位",prop:"goodsId.unit",width:"90"}})],1)]}}])}),n("el-table-column",{attrs:{label:"实付款",width:"85"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.total.toFixed(2))+"元")]}}])}),n("el-table-column",{attrs:{prop:"status",label:"订单状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",t._l(t.statusEnum,function(r,a){return e.row.status==a?n("li",{key:a},[t._v(t._s(r))]):t._e()}),0)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"operate-menu",attrs:{type:"text",size:"small"},on:{click:function(n){return t.orderDetails(e.row._id)}}},[t._v("订单详情")]),2===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$message({type:"success",message:"提醒商家成功！"})}}},[t._v("提醒发货")]):t._e(),1===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.goPay(e.row._id)}}},[t._v("去付款")]):t._e(),3===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.confirmReceiving(e.row._id)}}},[t._v("确认收货")]):t._e(),0===e.row.status||4===e.row.status?n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.confirmDelete(e.row._id)}}},[t._v("删除订单")]):t._e(),n("br"),4===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.orderDetails(e.row._id)}}},[t._v("   评价商品")]):t._e(),1===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.confirmCancel(e.row._id)}}},[t._v("   取消订单")]):t._e()]}}])})],1)],1)],1)])])},a=[],o=(n("55dd"),n("ac4d"),n("8a81"),n("ac6a"),{data:function(){return{tableData:[],statusEnum:["已取消","待付款","待发货","已发货","已完成"],loading:!0}},watch:{"$route.path":function(){var t=this.$route.params.status;this.initOrder(t)}},methods:{orderDetails:function(t){this.$router.push("/order_detail/"+t)},goPay:function(t){this.$router.push("/pay_order/".concat(t))},confirmCancel:function(t){var e=this;this.$confirm("确认取消订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.cancelOrder(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},confirmDelete:function(t){var e=this;this.$confirm("删除订单不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteOrder(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},confirmReceiving:function(t){var e=this;this.$confirm("确认收到货物, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.completeOrder(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},cancelOrder:function(t){var e=this;this.axios.post("/order/cancel",{_id:t}).then(function(t){if(1===t.data.status){e.$message({type:"success",message:"订单取消成功"});var n=e.$route.params.status;e.initOrder(n)}else e.$message.error("订单取消失败，请重新尝试！")})},deleteOrder:function(t){var e=this;this.axios.delete("/order/delete/".concat(t)).then(function(t){if(1===t.data.status){e.$message({type:"success",message:"订单删除成功"});var n=e.$route.params.status;e.initOrder(n)}else e.$message.error("订单删除失败，请重新尝试！")})},completeOrder:function(t){var e=this;this.axios.put("/order/sending",{orderId:t,status:4}).then(function(n){if(1===n.data.status){var r=!0,a=!1,o=void 0;try{for(var i,s=e.tableData.keys()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(e.tableData[c]._id===t){e.tableData.splice(c,1);break}}}catch(u){a=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}e.$message({type:"success",message:"收货成功！"}),e.$router.push("/order_detail/"+t)}else e.$message.error("未知错误，请刷新重试")})},initOrder:function(){var t=this,e=this.$route.params.status,n="";n=e?"/order/orderInfo/".concat(e):"/order/orderInfo",this.axios.get(n).then(function(e){t.tableData=e.data.data,t.tableData.sort(function(t,e){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()}),t.loading=!1})}},created:function(){this.initOrder()}}),i=o,s=(n("72ef"),n("da0a"),n("2877")),c=Object(s["a"])(i,r,a,!1,null,"137fa498",null);e["default"]=c.exports},1169:function(t,e,n){var r=n("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"37c8":function(t,e,n){e.f=n("2b4c")},"3a72":function(t,e,n){var r=n("7726"),a=n("8378"),o=n("2d00"),i=n("37c8"),s=n("86cc").f;t.exports=function(t){var e=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),a=n("d8e8"),o=n("4bf8"),i=n("79e5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(i(function(){c.sort(void 0)})||!i(function(){c.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),a(t))}})},"67ab":function(t,e,n){var r=n("ca5a")("meta"),a=n("d3f4"),o=n("69a8"),i=n("86cc").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("79e5")(function(){return c(Object.preventExtensions({}))}),l=function(t){i(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},d=function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return u&&h.NEED&&c(t)&&!o(t,r)&&l(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},"72ef":function(t,e,n){"use strict";var r=n("7a03"),a=n.n(r);a.a},"7a03":function(t,e,n){},"7bbc":function(t,e,n){var r=n("6821"),a=n("9093").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?s(t):a(r(t))}},"8a81":function(t,e,n){"use strict";var r=n("7726"),a=n("69a8"),o=n("9e1e"),i=n("5ca1"),s=n("2aba"),c=n("67ab").KEY,u=n("79e5"),l=n("5537"),f=n("7f20"),d=n("ca5a"),p=n("2b4c"),h=n("37c8"),m=n("3a72"),b=n("d4c0"),y=n("1169"),v=n("cb7c"),g=n("d3f4"),w=n("4bf8"),_=n("6821"),O=n("6a99"),S=n("4630"),x=n("2aeb"),k=n("7bbc"),$=n("11e9"),D=n("2621"),E=n("86cc"),P=n("0d58"),I=$.f,j=E.f,F=k.f,T=r.Symbol,N=r.JSON,z=N&&N.stringify,C="prototype",A=p("_hidden"),B=p("toPrimitive"),J={}.propertyIsEnumerable,K=l("symbol-registry"),R=l("symbols"),W=l("op-symbols"),M=Object[C],Y="function"==typeof T&&!!D.f,G=r.QObject,L=!G||!G[C]||!G[C].findChild,Q=o&&u(function(){return 7!=x(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=I(M,e);r&&delete M[e],j(t,e,n),r&&t!==M&&j(M,e,r)}:j,U=function(t){var e=R[t]=x(T[C]);return e._k=t,e},q=Y&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},H=function(t,e,n){return t===M&&H(W,e,n),v(t),e=O(e,!0),v(n),a(R,e)?(n.enumerable?(a(t,A)&&t[A][e]&&(t[A][e]=!1),n=x(n,{enumerable:S(0,!1)})):(a(t,A)||j(t,A,S(1,{})),t[A][e]=!0),Q(t,e,n)):j(t,e,n)},V=function(t,e){v(t);var n,r=b(e=_(e)),a=0,o=r.length;while(o>a)H(t,n=r[a++],e[n]);return t},X=function(t,e){return void 0===e?x(t):V(x(t),e)},Z=function(t){var e=J.call(this,t=O(t,!0));return!(this===M&&a(R,t)&&!a(W,t))&&(!(e||!a(this,t)||!a(R,t)||a(this,A)&&this[A][t])||e)},tt=function(t,e){if(t=_(t),e=O(e,!0),t!==M||!a(R,e)||a(W,e)){var n=I(t,e);return!n||!a(R,e)||a(t,A)&&t[A][e]||(n.enumerable=!0),n}},et=function(t){var e,n=F(_(t)),r=[],o=0;while(n.length>o)a(R,e=n[o++])||e==A||e==c||r.push(e);return r},nt=function(t){var e,n=t===M,r=F(n?W:_(t)),o=[],i=0;while(r.length>i)!a(R,e=r[i++])||n&&!a(M,e)||o.push(R[e]);return o};Y||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===M&&e.call(W,n),a(this,A)&&a(this[A],t)&&(this[A][t]=!1),Q(this,t,S(1,n))};return o&&L&&Q(M,t,{configurable:!0,set:e}),U(t)},s(T[C],"toString",function(){return this._k}),$.f=tt,E.f=H,n("9093").f=k.f=et,n("52a7").f=Z,D.f=nt,o&&!n("2d00")&&s(M,"propertyIsEnumerable",Z,!0),h.f=function(t){return U(p(t))}),i(i.G+i.W+i.F*!Y,{Symbol:T});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;rt.length>at;)p(rt[at++]);for(var ot=P(p.store),it=0;ot.length>it;)m(ot[it++]);i(i.S+i.F*!Y,"Symbol",{for:function(t){return a(K,t+="")?K[t]:K[t]=T(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in K)if(K[e]===t)return e},useSetter:function(){L=!0},useSimple:function(){L=!1}}),i(i.S+i.F*!Y,"Object",{create:X,defineProperty:H,defineProperties:V,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=u(function(){D.f(1)});i(i.S+i.F*st,"Object",{getOwnPropertySymbols:function(t){return D.f(w(t))}}),N&&i(i.S+i.F*(!Y||u(function(){var t=T();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))})),"JSON",{stringify:function(t){var e,n,r=[t],a=1;while(arguments.length>a)r.push(arguments[a++]);if(n=e=r[1],(g(e)||void 0!==t)&&!q(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!q(e))return e}),r[1]=e,z.apply(N,r)}}),T[C][B]||n("32e9")(T[C],B,T[C].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},"9c45":function(t,e,n){},ac4d:function(t,e,n){n("3a72")("asyncIterator")},d4c0:function(t,e,n){var r=n("0d58"),a=n("2621"),o=n("52a7");t.exports=function(t){var e=r(t),n=a.f;if(n){var i,s=n(t),c=o.f,u=0;while(s.length>u)c.call(t,i=s[u++])&&e.push(i)}return e}},da0a:function(t,e,n){"use strict";var r=n("9c45"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-637e0207.cfe11240.js.map