(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d9643ce"],{"10c2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"hover clearfix"},[r("div",{staticClass:"content"},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/user/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击更换头像",placement:"bottom"}},[r("el-avatar",{attrs:{size:50,src:e.avatar}})],1)],1),e._m(0),r("div",{staticClass:"info"},[r("div",{staticClass:"edit"},[r("el-row",[r("b",[e._v(" 基本信息：")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:!e.disabled},on:{click:function(t){e.disabled=!e.disabled}}})],1)],1),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"注册手机",prop:"telephone",disabled:""}},[r("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",t)},expression:"ruleForm.telephone"}})],1),r("el-form-item",{attrs:{label:"昵称",prop:"name",disabled:""}},[r("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-select",{attrs:{placeholder:"请选择活动区域",disabled:e.disabled},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[r("el-option",{attrs:{label:"男",value:"男"}}),r("el-option",{attrs:{label:"女",value:"女"}})],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1),r("el-divider"),r("change-password")],1)],1)],1)])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v(" 编辑个人资料")])])}],l=(r("7f7f"),r("4917"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"edit"},[r("el-row",[r("b",[e._v(" 修改密码：")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:!e.disabled},on:{click:function(t){e.disabled=!e.disabled}}})],1)],1),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"原密码",prop:"oldpass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",disabled:e.disabled},model:{value:e.ruleForm.oldpass,callback:function(t){e.$set(e.ruleForm,"oldpass",t)},expression:"ruleForm.oldpass"}})],1),r("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",disabled:e.disabled},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",disabled:e.disabled},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)}),o=[],i={data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},r=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()};return{ruleForm:{oldpass:"",pass:"",checkPass:""},rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}]},disabled:!0}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.axios.post("/user/edit/password",{oldPassword:t.ruleForm.oldpass,newPassword:t.ruleForm.pass}).then(function(e){1===e.data.status?t.$message({message:"密码修改成功！",type:"success"}):(t.$message.error("密码修改失败，请重新尝试！"),0===e.data.status&&t.$router.push("/login_register/login"))})})},resetForm:function(e){this.$refs[e].resetFields()}}},n=i,u=(r("98af"),r("2877")),d=Object(u["a"])(n,l,o,!1,null,"385ed0ab",null),c=d.exports,m={data:function(){var e=function(e,t,r){t.match(/^[a-zA-Z0-9_\-\u4e00-\u9fa5]{4,12}$/)?r():r(new Error("请输入中英文字符、数字或下划线组成的4-20位昵称！"))};return{avatar:"/avatar/default.png",ruleForm:{telephone:"17865579761",name:"",sex:"男"},rules:{name:[{required:!0,message:"请输入昵称!",trigger:"change"},{validator:e,trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}]},disabled:!0}},methods:{submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){e&&t.axios.post("/user/edit/info",{name:r.ruleForm.name,sex:r.ruleForm.sex}).then(function(e){1===e.data.status?(r.$message({message:"修改成功！",type:"success"}),r.disabled=!r.disabled):r.$message.error("修改失败，请重新尝试！")})})},resetForm:function(e){this.$refs[e].resetFields()},handleAvatarSuccess:function(e,t){this.avatar=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type|"image/png"===e.type,r=e.size/1024/1024<4;return t||this.$message.error("上传头像图片只能是JPG/PNG格式!"),r||this.$message.error("上传头像图片大小不能超过 4MB!"),t&&r}},components:{changePassword:c},created:function(){var e=this;this.axios.get("/user/person").then(function(t){0===t.data.status&&e.$router.push("/login_register/login"),e.ruleForm.telephone=t.data.data.telephone,e.ruleForm.name=t.data.data.name,e.ruleForm.sex=t.data.data.sex,e.avatar=t.data.data.avatar})}},p=m,f=(r("885f"),Object(u["a"])(p,a,s,!1,null,"5f7a6fe7",null));t["default"]=f.exports},4917:function(e,t,r){"use strict";var a=r("cb7c"),s=r("9def"),l=r("0390"),o=r("5f1b");r("214f")("match",1,function(e,t,r,i){return[function(r){var a=e(this),s=void 0==r?void 0:r[t];return void 0!==s?s.call(r,a):new RegExp(r)[t](String(a))},function(e){var t=i(r,e,this);if(t.done)return t.value;var n=a(e),u=String(this);if(!n.global)return o(n,u);var d=n.unicode;n.lastIndex=0;var c,m=[],p=0;while(null!==(c=o(n,u))){var f=String(c[0]);m[p]=f,""===f&&(n.lastIndex=l(u,s(n.lastIndex),d)),p++}return 0===p?null:m}]})},"885f":function(e,t,r){"use strict";var a=r("fb86"),s=r.n(a);s.a},9316:function(e,t,r){},"98af":function(e,t,r){"use strict";var a=r("9316"),s=r.n(a);s.a},fb86:function(e,t,r){}}]);
//# sourceMappingURL=chunk-6d9643ce.a11e9f68.js.map