(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52ae789e"],{"0c30":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"order-content clearfix"},[n("div",{staticClass:"content"},[n("person-avatar"),n("div",{staticClass:"order"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,border:"",id:"table"}},[n("el-table-column",{attrs:{label:"商品",width:"580"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{attrs:{data:e.row.goodsInfo,border:""}},[n("el-table-column",{attrs:{width:"108"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.axios.defaults.baseURL+e.row.goodsId.images[0]}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"名称",prop:"goodsId.name",width:"180"}}),n("el-table-column",{attrs:{label:"单价",prop:"goodsId.price",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.goodsId.price.toFixed(2))+"元")]}}],null,!0)}),n("el-table-column",{attrs:{label:"数量",prop:"num",width:"90"}}),n("el-table-column",{attrs:{label:"单位",prop:"goodsId.unit",width:"90"}})],1)]}}])}),n("el-table-column",{attrs:{label:"实付款",width:"85"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.total.toFixed(2))+"元")]}}])}),n("el-table-column",{attrs:{prop:"status",label:"订单状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",t._l(t.statusEnum,function(a,r){return e.row.status==r?n("li",{key:r},[t._v(t._s(a))]):t._e()}),0)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"operate-menu",attrs:{type:"text",size:"small"},on:{click:function(n){return t.orderDetails(e.row._id)}}},[t._v("订单详情")]),2===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$message({type:"success",message:"提醒商家成功！"})}}},[t._v("提醒发货")]):t._e(),1===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.goPay(e.row._id)}}},[t._v("去付款")]):t._e(),3===e.row.status?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$message.error("确认收货，暂不可用")}}},[t._v("确认收货")]):t._e(),0===e.row.status||4===e.row.status?n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.confirmDelete(e.row._id)}}},[t._v("删除订单")]):t._e(),n("br"),4===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.orderDetails(e.row._id)}}},[t._v("   评价商品")]):t._e(),1===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.confirmCancel(e.row._id)}}},[t._v("   取消订单")]):t._e()]}}])})],1)],1)],1)])])},r=[],s=(n("55dd"),{data:function(){return{tableData:[],statusEnum:["已取消","待付款","待发货","已发货","已完成"],loading:!0}},watch:{"$route.path":function(){var t=this.$route.params.status;this.initOrder(t)}},methods:{orderDetails:function(t){this.$router.push("/order_detail/"+t)},goPay:function(t){this.$router.push("/pay_order/".concat(t))},confirmCancel:function(t){var e=this;this.$confirm("确认取消订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.cancelOrder(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},confirmDelete:function(t){var e=this;this.$confirm("删除订单不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteOrder(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},cancelOrder:function(t){var e=this;this.axios.post("/order/cancel",{_id:t}).then(function(t){if(1===t.data.status){e.$message({type:"success",message:"订单取消成功"});var n=e.$route.params.status;e.initOrder(n)}else e.$message.error("订单取消失败，请重新尝试！")})},deleteOrder:function(t){var e=this;this.axios.delete("/order/delete/".concat(t)).then(function(t){if(1===t.data.status){e.$message({type:"success",message:"订单删除成功"});var n=e.$route.params.status;e.initOrder(n)}else e.$message.error("订单删除失败，请重新尝试！")})},initOrder:function(){var t=this,e=this.$route.params.status,n="";n=e?"/order/orderInfo/".concat(e):"/order/orderInfo",this.axios.get(n).then(function(e){t.tableData=e.data.data,t.tableData.sort(function(t,e){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()}),t.loading=!1})}},created:function(){this.initOrder()}}),o=s,i=(n("a1f2"),n("da0a"),n("2877")),l=Object(i["a"])(o,a,r,!1,null,"1a5565b1",null);e["default"]=l.exports},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),r=n("d8e8"),s=n("4bf8"),o=n("79e5"),i=[].sort,l=[1,2,3];a(a.P+a.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!n("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(s(this)):i.call(s(this),r(t))}})},"7e2c":function(t,e,n){},"9c45":function(t,e,n){},a1f2:function(t,e,n){"use strict";var a=n("7e2c"),r=n.n(a);r.a},da0a:function(t,e,n){"use strict";var a=n("9c45"),r=n.n(a);r.a}}]);
//# sourceMappingURL=chunk-52ae789e.6a89a246.js.map